{"compress":true,"commitItems":[["84198378-3228-4534-8b24-98aaf15cd0df",1630380665084,"---\nlayout: 在工作中遇到的一个小需求\ntitle: 在工作中遇到的一个小需求\ndate: 2019-07-24 14:42:45\ncategories: \"PHP\"\nabbrlink: 002a\ntags: \n- PHP\n---\n\n\n\n<img src=\"http://images.linyiyuan.top/865473-20151228193443823-967656275.png\" style=\"width:900px;height:400px\" />\n\n\n\n## 前言\n\n在工作中遇到了一个小需求，游戏服务器那边需要后台生成一个六位数的夺宝码，生成为规则0~9，然后A~Z；从最末位开始 如第一个夺宝码为000000，之后依次为000001~000009,00000A~00000Z;当末位数0~9和A~Z都已使用完，则从倒数第二位继续，夺宝码为按照以上顺序依次生成\n\n\n\n<!--less-->\n\n夺宝码生成规则\n-------\n\n1. 夺宝码为6位，由大写字母和数字组成\n\n2. 生成为规则0~9，然后A~Z；从最末位开始 如第一个夺宝码为000000，之后依次为000001~000009,00000A~00000Z;当末位数0~9和A~Z都已使用完，则从倒数第二位继续\n\n3. 夺宝码为按照以上顺序依次生成\n\n4. 夺宝码每月1号0点清空重新生成\n\n   根据上面的生成规则我们可以清楚的了解到这是一个典型的10进制转36进制的问题，生成代码如下\n\n```php\nfunction makeTreasureCode($num = 0){\n    if(empty($num)) return [];\n\n    $outPut = array();\n        $outPut[] = base_convert($num, 10, 36);\n        $count = strlen($outPut[0]);\n\n        if ($count < 6) {\n            $k = 6 - $count;\n            for ($j = $k; $j > 0; $j--) {\n                array_push($outPut, 0);\n            }\n        }\n\n        $outPut = array_reverse($outPut);\n        $outPut = join('', $outPut);\n\n    return $outPut;\n}\n\n$num = 5 //生成夺宝码的数量\n$code = makeTreasureCode($num);\n\necho '';\n  print_r($code);\necho '';\n\n```",[[1630380663744,["Administrator@YMS-20200313EGD",[[-1,101,"2"]],[102,102],[101,101]]],[1630380663817,["Administrator@YMS-20200313EGD",[[1,101,"3"]],[101,101],[102,102]]]],null,"Administrator@YMS-20200313EGD"]]}